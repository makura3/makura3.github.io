---
title: Vue.jsの導入方法からテンプレート構文、コンパイラについてのまとめ
# thumbnail: thumbnail.png
date: 2018-05-14 19:50:19
description:
category: Vue
id: vue-summary
tags:
  - Vue
---

諸事情でVue.jsを触ることになったのでまずはドキュメントの読み込みからはじめました。  
完全に理解出来ているのかどうかを確認するため、内容を忘れないためにも記事としてまとめました。    
<br>
ちなみに`今のVue熟練度は1`(過去にチュートリアルレベルの作品を途中で投げ出したことがある)です。  

<!-- toc -->

## はじめに
この記事は`超初心者向け`の記事となっています。  
実際にソースを書く前に基本的な知識をつけておきたいという気持ちから出来上がっています。  
<br>
Vueは日本語のドキュメントがあるのですが、その中でも「結局どういうことなの？」と思った部分について書いています。  
<br>
対応バージョンはv2.xです。  

## Vue.jsとは
公式のガイドに大きく、  
> ユーザーインターフェイスを構築するためのプログレッシブフレームワークです。  

と記載がありました。ふむふむ。  
プログレッシブフレームワークとはなんだろう？  

### プログレッシブフレームワーク
最初はソースも綺麗でイケてるアプリケーションだったのに、仕様変更や機能追加を繰り返すうちに気付いたら肥大化、ブラックホールと化していた...なんて事はよく聞くと思います。   
そのため我々開発者は、アプリケーションの変化に柔軟に対応できるツール（拡張性に優れ、メンテナンスしやすい）を選択したいと常々考えているのではないでしょうか。  
<br>
<br>
ではVueはどうでしょうか。   
Vue自体はview層だけに焦点を当てたライブラリとなっていますが、  
[サポートライブラリ](https://github.com/vuejs/awesome-vue#components--libraries)などの導入により、より複雑で洗練されたアプリケーションの作成が可能となります。  
よってVueではそれぞれのアプリケーション規模に合わせて柔軟に対応が可能になります。  
<br>
なんだかワクワクしてきましたね！

### 導入方法
環境構築は後にとっておき、まずVueを使うための[3種類の利用方法](https://jp.vuejs.org/v2/guide/installation.html)を確認しておきます。  
<br>

#### scriptタグで直接組み込む
開発モード/本番モードでファイルが分かれているので、状況に応じて[公式サイト](https://jp.vuejs.org/v2/guide/installation.html#lt-script-gt-%E7%9B%B4%E6%8E%A5%E7%B5%84%E3%81%BF%E8%BE%BC%E3%81%BF)からダウンロードし読み込んで下さい。  
開発モードでは`警告出力とデバッグモードがあります`が、本番モードでは`警告出力なしかつ圧縮されています`。  
<br>
もしくは[CDN](https://jp.vuejs.org/v2/guide/installation.html#CDN)を使用することでVueのソースが参照可能になります。  

#### CLI
Vueでは[オフィシャルCLI](https://github.com/vuejs/vue-cli)が用意されています。  
すぐに環境構築ができるので楽なのですが、右も左も分からない初心者さん(私)にはオススメしていないのでこんなのもあるよぐらいにしておきます。  

#### NPM
公式サイトでも推奨されている方法で、私もこの方法を使用しています。  
Vueのみのインストールは公式に記述されている通りで問題ないですが、加えて使用するモジュールバンドラにそったloaderなどをインストールする必要があります。
```js
// vueだけインストール
npm i -S vue

// webpackを使う場合
npm i -D vue-loader
```

## Vueのコンパイルについて

コンパイルについて詳しく解説する前に、まずVueのテンプレート構文3種類について説明します。  
事前にどのような記述方法があるのかを知っておくことで、後述するコンパイルについて理解し易くなると思います。

### テンプレート構文

#### 1.文字列テンプレート
[公式の一番最初](https://jp.vuejs.org/v2/guide/#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AB%E3%82%88%E3%82%8B%E6%A7%8B%E6%88%90)にスッと出てくる記述です。  
文字列でコンポーネントを定義するようです。  
```js
Vue.component('todo-item', {
  template: '<li>This is a todo</li>'
})
```

#### 2.直接render関数で書く
こちらはrender関数に直接定義しています。  

```js
Vue.component('anchored-heading', {
  render: function (createElement) {
    return createElement( 'h' + this.level )
  },
  props: {
    //省略
  }
})
```

#### 3.単一ファイルコンポーネント
こちらはどうでしょうか。  
```xml
<template>
  <div>Hello world!!</div>
</template>

<script>
// 省略
</script>

<style>
<!-- 省略 -->
</style>
```

templateの部分とscript、styleの部分が分離されており、非常に分かりやすいと思います。   
<br>

### レンダリングとテンプレートのコンパイル

Vueはrendar関数(描画関数)に表示したい内容を渡すことでレンダリングするしくみのようです。  
そのためテンプレートを使用した場合、rendar関数が定義したテンプレートを読み取れるように変換(コンパイル)を行う必要があります。  
<br>
直接render関数で書いた場合は描画したいものをすでにrendar関数に渡しているので、コンパイルする必要はありません。  
<br>
<br>
さて、使用するテンプレート構文によってコンパイルが必要なのかどうか理解できたかと思います。  
次にこの公式ドキュメントを読んでみてください。  
<br>
> DOM内のテンプレートまたはJavaScript内のテンプレート文字列を使用する場合、テンプレートから描画関数へのコンパイルはその場 (on the fly) で実行されます。  
> <br>
> 通常、ほとんどの場合、これは十分高速ですが、アプリケーションのパフォーマンスが重要な場合は避けるのが最善です。  
    
<br>

簡単に説明すると、コンパイルするタイミングは`ブラウザ上で実行した瞬間だよ`と言っているのです。  
そして続けて、パフォーマンスが重要な場面では避けたほうがいいよと言っています。  
<br>
確かに事前にコンパイルをしておけるしくみがあれば、それを利用することで読み込み時間の短縮が期待できそうです！  　　


## Vueのビルドについて

事前にコンパイルをしておけるしくみを知る前に、ビルドの種類を整理しておきます。  

#### 完全ビルド
コンパイルに必要なコンパイラとランタイム※の両方が含まれたビルドになります。 
※ランタイムとは、Vueインスタンスの作成やレンダリングなどコンパイラ以外の機能のことを言います。  

#### ランタイム限定ビルド
ランタイムのみが含まれています。  
完全ビルドに比べておよそ30%ほど軽量です。  
<br>
ちなみにCDNからVueを導入した場合は、完全ビルド用のvue.jsが読み込まれます。  

### ビルドのつかいわけ
文字列テンプレート及び単一ファイルコンポーネントを使用した場合はコンパイルが必要でした。  
よって、これらを使用した場合は完全ビルドが必要となります。  

`vue-loader`などを使用した場合、テンプレートは事前にJavaScriptへコンパイルされるためブラウザなどの実行環境ではコンパイラは必要ありません。  
よって、コンパイラが入っていないランタイム限定ビルドが出来れば問題ないのです。 


### 各テンプレートごとの
#### 文字列テンプレート
[公式](https://jp.vuejs.org/v2/api/#Vue-compile)にもあるように、完全ビルドの場合のみ利用が可能です。  

#### 直接render関数で書いた時



## ドキュメントを読み込んでみて
Vueは珍しく日本語ドキュメントが用意されているものの、読んでいるとどういう意味だろう？と思う点が何度もありました。  

次は実際に環境構築〜小さいアプリケーションの作成までしてみようと思います。